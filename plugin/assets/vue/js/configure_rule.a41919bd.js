(function(e){function t(t){for(var r,i,a=t[0],u=t[1],c=t[2],d=0,p=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==s[u]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},s={configure_rule:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/plugins_packages/uaux/BundleAllocationPlugin/views/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("4cb3")},"078b":function(e,t,n){"use strict";var r=n("295f"),s=n.n(r);t["default"]=s.a},"0978":function(e,t,n){"use strict";var r=n("e81e"),s=n.n(r);t["default"]=s.a},2759:function(e,t,n){},"295f":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"de_DE":{"step3_header":"Schritt 3: Zuteilungsgruppen konfigurieren","no_group":"Keine Zuteilungsgruppe vorhanden.","add_group":"Neue Zuteilungsgruppe erstellen","locked":"Es können keine Änderungen an Zuteilungsgruppen durchgeführt werden, nachdem Prioritäten bereits abgegeben wurden."},"en_GB":{"step3_header":"Step 3: Configure allocation groups","no_group":"There are no allocation groups.","add_group":"Create new allocation group","locked":"Since applications to courses has already been submitted, you cannot change the current allocation group configuration."}}'),delete e.options._Ctor}},3836:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"de_DE":{"group_name":"Name","length_hint":"Zeichen verbleibend: ","min_prios":"Minimale Anzahl einzureichende Prioritäten","assigned_courses":"Zugeordnete Veranstaltungen","course":"Veranstaltung","times_rooms":"Zeit/Veranstaltungsort","capacity":"max. Teilnehmendenanzahl","zero_assigned":"keine zugeordneten Veranstaltungen","actions":"Aktionen","delete":"Zuordnung löschen","merge":"Zusammenfassen","split":"Trennen","execute":"Ausführen","available_courses":"Keiner Zuteilungsgruppe zugeordnet","zero_to_be_assigned":"keine zuzuordnenden Veranstaltungen"},"en_GB":{"group_name":"Name","length_hint":"Remaining characters: ","min_prios":"min. Number of Priorities to be submitted:","assigned_courses":"Assigned courses","course":"Course","times_rooms":"Time/Course location","capacity":"max. Number of Participants","zero_assigned":"No assigned courses","actions":"Actions","delete":"Delete","merge":"Merge","split":"Split","execute":"Execute","available_courses":"Available courses","zero_to_be_assigned":"No courses to be assigned"}}'),delete e.options._Ctor}},"4cb3":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("DistDateTime",{directives:[{name:"show",rawName:"v-show",value:0===e.step,expression:"step === 0"}]}),n("CourseCapacity",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}]}),n("RankingGroupList",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step === 2"}]}),n("button",{staticClass:"button",attrs:{disabled:!e.step>0},on:{click:function(t){return t.preventDefault(),e.prevStep(t)}}},[e._v(e._s(e.$t("prevStep")))]),n("button",{staticClass:"button",attrs:{disabled:e.step>=2},on:{click:function(t){return t.preventDefault(),e.nextStep(t)}}},[e._v(e._s(e.$t("nextStep")))])],1)},o=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"datetime"}},[n("h3",[e._v(e._s(e.$t("step1_header")))]),n("p",[e._v(e._s(e.$t("begin")))]),n("label",{staticClass:"col-1"},[n("span",{staticClass:"required"},[e._v(e._s(e.$t("date")))]),n("input",{staticClass:"size-s no-hint",attrs:{type:"text",name:"applicationdate",id:"applicationdate",placeholder:"tt.mm.jjjj",required:""},domProps:{value:e.rule.appl_date}})]),n("label",{staticClass:"col-1"},[n("span",{staticClass:"required"},[e._v(e._s(e.$t("time")))]),n("input",{staticClass:"size-s no-hint",attrs:{type:"text",name:"applicationtime",id:"applicationtime",placeholder:"ss:mm",required:""},domProps:{value:e.rule.appl_time}})]),n("p",[e._v(e._s(e.$t("end")))]),n("label",{staticClass:"col-1"},[n("span",{staticClass:"required"},[e._v(e._s(e.$t("date")))]),n("input",{staticClass:"size-s no-hint",attrs:{type:"text",name:"distributiondate",id:"distributiondate",placeholder:"tt.mm.jjjj",required:""},domProps:{value:e.rule.dist_date}})]),n("label",{staticClass:"col-1"},[n("span",{staticClass:"required"},[e._v(e._s(e.$t("time")))]),n("input",{staticClass:"size-s no-hint",attrs:{type:"text",name:"distributiontime",id:"distributiontime",placeholder:"ss:mm",required:""},domProps:{value:e.rule.dist_time}})])])},a=[],u=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),c=n("2f62");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(u["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"DistDateTime",computed:d({},Object(c["c"])(["rule"])),mounted:function(){jQuery("#applicationdate").datepicker(),jQuery("#applicationtime").timepicker(),jQuery("#distributiondate").datepicker(),jQuery("#distributiontime").timepicker()}},_=p,f=n("2877"),m=n("ba02"),g=Object(f["a"])(_,i,a,!1,null,"00260556",null);"function"===typeof m["default"]&&Object(m["default"])(g);var h=g.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"course_capacity"}},[n("h3",[e._v(e._s(e.$t("step2_header")))]),n("table",{staticClass:"default"},[n("thead",[n("tr",[n("th"),n("th",[e._v(e._s(e.$t("course")))]),n("th",[e._v(e._s(e.$t("times_rooms")))]),n("th",[n("span",{staticClass:"required"},[e._v(e._s(e.$t("capacity")))])])])]),e._m(0),n("tbody",e._l(e.course_infos,(function(t,r){return n("tr",{key:r},[n("td",[n("a",{attrs:{href:"/dispatch.php/course/details/index/"+t.course_id,"data-dialog":""}},[n("img",{staticClass:"icon-role-inactive icon-shape-info-circle",attrs:{title:e.$t("course_details"),src:"/assets/images/icons/grey/info-circle.svg",alt:"Veranstaltungsdetails aufrufen",width:"16",height:"16"}})])]),n("td",[e._v(e._s(t.name))]),n("td",[n("span",{domProps:{innerHTML:e._s(t.times_rooms)}})]),n("td",[n("input",{attrs:{type:"number",min:"0",placeholder:"0",name:"course_capacity["+t.course_id+"]"},domProps:{value:t.capacity},on:{input:function(n){return e.updateCapacity(n,t.course_id)}}})])])})),0)])])},v=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("colgroup",[n("col",{attrs:{width:"18"}}),n("col"),n("col"),n("col")])}];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(u["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={name:"CourseCapacity",computed:O({},Object(c["c"])(["course_infos","rule"])),methods:{updateCapacity:function(e,t){this.$store.dispatch("updateCapacity",{course_id:t,capacity:e.target.value})}}},w=j,k=n("fc8c"),P=Object(f["a"])(w,b,v,!1,null,"6b3ebf86",null);"function"===typeof k["default"]&&Object(k["default"])(P);var C=P.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"ranking_groups"}},[n("h3",[e._v(e._s(e.$t("step3_header")))]),n("section",{staticClass:"contentbox"},[0===Object.keys(e.rule.groups).length?n("div",{staticClass:"messagebox messagebox_info"},[e._v("\n            "+e._s(e.$t("no_group"))+"\n        ")]):e._e(),e.rule.locked?n("div",{staticClass:"messagebox messagebox_info"},[e._v("\n            "+e._s(e.$t("locked"))+"\n        ")]):e._e(),e._l(e.rule.groups,(function(e,t){return n("RankingGroup",{key:t,attrs:{id:t,group:e}})})),n("button",{staticClass:"button",attrs:{disabled:e.rule.locked},on:{click:function(t){return t.preventDefault(),e.addGroup(t)}}},[e._v(e._s(e.$t("add_group")))])],2)])},$=[],D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{},[n("header",[n("h1",[n("a",{attrs:{href:"#"}},[e._v("\n                "+e._s(e.group.groupName)+"\n            ")])]),n("nav",[e.rule.locked?e._e():n("a",{attrs:{"data-dialog":"size=auto;"},on:{click:function(t){return t.preventDefault(),e.deleteGroup(t)}}},[n("svg",{attrs:{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","shape-rendering":"geometricPrecision",fill:"#24437c"}},[n("path",{attrs:{d:"M9.759 2.438V1.03H6.24v1.408H2.717v1.917h10.565V2.438H9.759zM3.661 14.97h8.645V5.388H3.661v9.582zm6.163-8.075h1.016v6.567H9.824V6.895zm-2.35 0h1.017v6.567H7.474V6.895zm-2.349 0h1.016v6.567H5.125V6.895z"}})])])])]),n("section",[n("label",{attrs:{for:"name"}},[n("span",{staticClass:"required"},[e._v(e._s(e.$t("group_name")))]),n("div",{staticClass:"length-hint-wrapper",staticStyle:{width:"667px"}},[n("div",{staticClass:"length-hint",staticStyle:{display:"none"}},[e._v("\n                    "+e._s(e.$t("length_hint"))),n("span",{staticClass:"length-hint-counter"},[e._v("255")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.group.groupName,expression:"group.groupName"}],attrs:{type:"text",id:"name",size:"75",maxlength:"255",required:"","aria-required":"true",readonly:e.rule.locked},domProps:{value:e.group.groupName},on:{input:function(t){t.target.composing||e.$set(e.group,"groupName",t.target.value)}}})])]),n("label",{attrs:{for:"min_amount_prios"}},[n("span",{staticClass:"required"},[e._v(e._s(e.$t("min_prios")))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.group.minAmountPrios,expression:"group.minAmountPrios"}],attrs:{type:"number",id:"min_amount_prios",min:"0",max:Object.keys(e.group.bundleItems).length,readonly:e.rule.locked},domProps:{value:e.group.minAmountPrios},on:{input:function(t){t.target.composing||e.$set(e.group,"minAmountPrios",t.target.value)}}})]),n("label",{attrs:{for:"assigned"}},[n("span",{staticClass:"required"},[e._v(e._s(e.$t("assigned_courses")))])]),n("table",{staticClass:"labeled default",attrs:{id:"assigned"}},[n("thead",[n("tr",[n("th"),n("th",[e._v(e._s(e.$t("course")))]),n("th",[e._v(e._s(e.$t("times_rooms")))]),n("th",[e._v(e._s(e.$t("capacity")))])])]),e._m(0),n("tbody",[0===Object.keys(e.group.bundleItems).length?n("tr",[n("td"),n("td",{attrs:{colspan:"3"}},[n("em",[e._v(e._s(e.$t("zero_assigned")))])])]):e._e(),e._l(e.sortedBundleItems,(function(t){var r=t[0],s=t[1];return e._l(e.bundleCourseDetails(s.courses),(function(t,o){return n("tr",{key:t.course_id},[0===o?n("td",{style:e.mergedIndicator(s),attrs:{rowspan:Object.keys(s.courses).length}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxed[r],expression:"checkboxed[item_id]"}],attrs:{type:"checkbox",disabled:e.rule.locked},domProps:{checked:Array.isArray(e.checkboxed[r])?e._i(e.checkboxed[r],null)>-1:e.checkboxed[r]},on:{change:function(t){var n=e.checkboxed[r],s=t.target,o=!!s.checked;if(Array.isArray(n)){var i=null,a=e._i(n,i);s.checked?a<0&&e.$set(e.checkboxed,r,n.concat([i])):a>-1&&e.$set(e.checkboxed,r,n.slice(0,a).concat(n.slice(a+1)))}else e.$set(e.checkboxed,r,o)}}})]):e._e(),n("td",[e._v(e._s(t.name))]),n("td",[n("span",{domProps:{innerHTML:e._s(t.times_rooms)}})]),n("td",[e._v(e._s(t.capacity))])])}))}))],2),n("tfoot",[n("tr",[n("td",{attrs:{colspan:"4"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.action,expression:"action"}],staticClass:"select-action",attrs:{disabled:0===e.selectedBundleItems.length||e.rule.locked},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.action=t.target.multiple?n:n[0]}}},[n("option",{attrs:{selected:"",disabled:"",value:""}},[e._v(e._s(e.$t("actions")))]),e.selectedBundleItems.length>0?n("option",{attrs:{value:"delete"}},[e._v(e._s(e.$t("delete")))]):e._e(),e.selectedBundleItems.length>1?n("option",{attrs:{value:"merge"}},[e._v(e._s(e.$t("merge")))]):e._e(),e.splittableBundleItem?n("option",{attrs:{value:"split"}},[e._v(e._s(e.$t("split")))]):e._e()]),n("button",{staticClass:"button",attrs:{disabled:e.rule.locked},on:{click:function(t){return t.preventDefault(),e.delegateAction(t)}}},[e._v(e._s(e.$t("execute")))])])])])]),n("label",{attrs:{for:"non_assigned"}},[e._v("\n            "+e._s(e.$t("available_courses"))+"\n        ")]),n("table",{staticClass:"labeled default",attrs:{id:"non_assigned"}},[n("thead",[n("tr",[n("th"),n("th",[e._v(e._s(e.$t("course")))]),n("th",[e._v(e._s(e.$t("times_rooms")))]),n("th",[e._v(e._s(e.$t("capacity")))])])]),e._m(1),n("tbody",[0===e.notAssignedCourseDetails.length?n("tr",[n("td"),n("td",{attrs:{colspan:"3"}},[n("em",[e._v(e._s(e.$t("zero_to_be_assigned")))])])]):e._e(),e._l(e.notAssignedCourseDetails,(function(t){return n("tr",{key:t.course_id},[n("td",[n("button",{staticClass:"add-button",attrs:{disabled:e.rule.locked},on:{click:function(n){return n.preventDefault(),e.addCourseToGroup(t.course_id)}}},[n("svg",{attrs:{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","shape-rendering":"geometricPrecision",fill:"#24437c"}},[n("path",{attrs:{d:"M8 1.001a7 7 0 1 0 .003 14 7 7 0 0 0-.003-14zm4.016 8.024H9.023l.002 2.943-2.048.001.001-2.943H3.984l-.001-2.05h2.994V4l2.047-.001v2.976l2.993.001-.001 2.049z"}})])])]),n("td",[e._v(e._s(t.name))]),n("td",[n("span",{domProps:{innerHTML:e._s(t.times_rooms)}})]),n("td",[e._v(e._s(t.capacity))])])}))],2)])]),n("input",{attrs:{type:"hidden",name:"groups["+e.id+"]"},domProps:{value:JSON.stringify(e.group)}})])},I=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("colgroup",[n("col",{attrs:{width:"35"}}),n("col"),n("col"),n("col")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("colgroup",[n("col",{attrs:{width:"35"}}),n("col"),n("col"),n("col")])}],S=n("768b");n("ffc1"),n("55dd"),n("7f7f");function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Object(u["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={name:"RankingGroup",data:function(){return{checkboxed:{},action:""}},props:["id","group"],computed:E({},Object(c["c"])(["course_infos","rule"]),{},Object(c["b"])(["notAssignedCourseDetails"]),{selectedBundleItems:function(){var e=this;return Object.keys(this.checkboxed).filter((function(t){return!0===e.checkboxed[t]}))},splittableBundleItem:function(){return 1===this.selectedBundleItems.length&&Object.keys(this.group.bundleItems[this.selectedBundleItems[0]].courses).length>1},sortedBundleItems:function(){var e=E({},this.group.bundleItems),t=!1;for(var n in e)void 0!==this.course_infos[Object.keys(e[n].courses)[0]]?(e[n].sortingName=this.course_infos[Object.keys(e[n].courses)[0]].name,t=!0):delete e[n];return t?Object.entries(e).sort((function(e,t){var n=Object(S["a"])(e,2),r=n[1],s=Object(S["a"])(t,2),o=s[1];return r.sortingName.localeCompare(o.sortingName)})):[]}}),methods:{mergedIndicator:function(e){return Object.keys(e.courses).length>1?{borderRight:"3px solid #e7ebf1"}:{}},bundleCourseDetails:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&this.course_infos.hasOwnProperty(n)&&t.push(E({},this.course_infos[n]));return t.sort((function(e,t){return e.name.localeCompare(t.name)})),t},deleteGroup:function(){this.$store.dispatch("deleteGroup",{group_id:this.id})},addCourseToGroup:function(e){this.$store.dispatch("addBundleItem",{group_id:this.id,course_ids:[e]})},delegateAction:function(){"delete"===this.action?this.$store.dispatch("deleteBundleItems",{group_id:this.id,item_ids:this.selectedBundleItems}):"merge"===this.action?this.$store.dispatch("mergeBundleItems",{group_id:this.id,item_ids:this.selectedBundleItems}):"split"===this.action&&this.$store.dispatch("splitBundleItem",{group_id:this.id,item_id:this.selectedBundleItems[0]}),this.action="",this.checkboxed={}}}},z=A,N=(n("8f17"),n("b493")),G=Object(f["a"])(z,D,I,!1,null,"07c95a35",null);"function"===typeof N["default"]&&Object(N["default"])(G);var T=G.exports;function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(u["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z={name:"RankingGroupList",components:{RankingGroup:T},computed:q({},Object(c["c"])(["rule"])),methods:{addGroup:function(){this.$store.dispatch("addGroup")}}},H=Z,M=(n("ab9c"),n("078b")),L=Object(f["a"])(H,x,$,!1,null,"2996ad46",null);"function"===typeof M["default"]&&Object(M["default"])(L);var R=L.exports,Q={name:"configure_rule",components:{RankingGroupList:R,CourseCapacity:C,DistDateTime:h},data:function(){return{step:0}},created:function(){var e=STUDIP.Dialog.getInstance("configurerule");void 0!==e&&(jQuery(e.element).dialog("option","width",.9*jQuery(window).width()),jQuery(e.element).dialog("option","height",.8*jQuery(window).height())),this.$store.dispatch("initialState"),this.$root.$i18n.locale=this.$store.state.lang},methods:{nextStep:function(){this.step<2&&this.step++},prevStep:function(){this.step>0&&this.step--}}},J=Q,K=n("0978"),U=Object(f["a"])(J,s,o,!1,null,null,null);"function"===typeof K["default"]&&Object(K["default"])(U);var F=U.exports,W=n("7618"),X=(n("6762"),n("2fdb"),n("75fc")),Y=n("bc3a"),ee=n.n(Y);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){Object(u["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}r["a"].use(c["a"]);var re=new c["a"].Store({state:{lang:"de_DE",rule:{},course_infos:{},selected_course_ids:[]},getters:{assignedCourses:function(e){var t=[];for(var n in e.rule.groups)if(e.rule.groups.hasOwnProperty(n)){var r=e.rule.groups[n];for(var s in r.bundleItems)r.bundleItems.hasOwnProperty(s)&&t.push.apply(t,Object(X["a"])(Object.keys(r.bundleItems[s].courses)))}return t},notAssignedCourses:function(e,t){return e.selected_course_ids.filter((function(e){return!t.assignedCourses.includes(e)}))},notAssignedCourseDetails:function(e,t){var n=[];return t.notAssignedCourses.forEach((function(t){void 0!==e.course_infos[t]&&n.push(ne({},e.course_infos[t]))})),n.sort((function(e,t){return e.name.localeCompare(t.name)})),n}},mutations:{setLanguage:function(e,t){e.lang=t},setRule:function(e,t){e.rule=t},setSelectedCourseIds:function(e,t){e.selected_course_ids=t},setCourseInfos:function(e,t){e.course_infos=t},setCourseInfoById:function(e,t){var n=t.course_id,r=t.info;e.course_infos[n]=r},addGroup:function(e,t){r["a"].set(e.rule.groups,t.id,t)},deleteGroup:function(e,t){var n=t.group_id;r["a"].delete(e.rule.groups,n)},addBundleItem:function(e,t){var n=t.group_id,s=t.item;r["a"].set(e.rule.groups[n].bundleItems,s.id,s)},deleteBundleItem:function(e,t){var n=t.group_id,s=t.item_id;r["a"].delete(e.rule.groups[n].bundleItems,s)}},actions:{initialState:function(e){var t=e.commit,n=JSON.parse(BUNDLEALLOCATION_DATA),r=Object(X["a"])(document.querySelectorAll('#instcourses input[name="courses[]"]:checked')).map((function(e){return e.value}));t("setRule",n),t("setSelectedCourseIds",r),t("setLanguage",n.lang),ee.a.post("/plugins.php/bundleallocationplugin/rule/course_infos",{course_ids:r}).then((function(e){for(var r in e.data)!0===e.data.hasOwnProperty(r)&&null!==n.course_capacity&&void 0!==Object(W["a"])(n.course_capacity[r])&&(e.data[r].capacity=n.course_capacity[r]);t("setCourseInfos",e.data)})).catch((function(e){return console.error(e)}))},updateCapacity:function(e,t){var n=e.commit,r=e.state,s=t.course_id,o=t.capacity,i=r.course_infos[s];i.capacity=o,n("setCourseInfoById",{course_id:s,info:i})},addGroup:function(e){var t=e.commit,n=e.state,r=new FormData;r.append("rule_id",n.rule.rule_id),r.append("group_name","Neue Zuteilungsgruppe"),ee.a.post("/plugins.php/bundleallocationplugin/rule/add_ranking_group",r).then((function(e){t("addGroup",e.data)})).catch((function(e){return console.error(e)}))},deleteGroup:function(e,t){var n=e.commit,r=t.group_id;n("deleteGroup",{group_id:r})},addBundleItem:function(e,t){var n=e.commit,r=t.group_id,s=t.course_ids,o=new FormData;o.append("group_id",r),ee.a.post("/plugins.php/bundleallocationplugin/rule/add_bundle_item",o).then((function(e){s.forEach((function(t){e.data.courses[t]=!0})),n("addBundleItem",{group_id:r,item:e.data})}))},deleteBundleItems:function(e,t){var n=e.commit,r=t.group_id,s=t.item_ids;s.forEach((function(e){n("deleteBundleItem",{group_id:r,item_id:e})}))},mergeBundleItems:function(e,t){var n=e.dispatch,r=e.state,s=t.group_id,o=t.item_ids,i=[];o.forEach((function(e){i.push.apply(i,Object(X["a"])(Object.keys(r.rule.groups[s].bundleItems[e].courses)))})),n("addBundleItem",{group_id:s,course_ids:i}).then((function(){n("deleteBundleItems",{group_id:s,item_ids:o})}))},splitBundleItem:function(e,t){var n=e.dispatch,r=e.state,s=t.group_id,o=t.item_id;Object.keys(r.rule.groups[s].bundleItems[o].courses).forEach((function(e){n("addBundleItem",{group_id:s,course_ids:[e]})})),n("deleteBundleItems",{group_id:s,item_ids:[o]})}}}),se=n("a925");r["a"].config.productionTip=!1,r["a"].use(se["a"]);var oe=new se["a"]({locale:"de_DE",messages:{en:{}}});new r["a"]({store:re,i18n:oe,render:function(e){return e(F)}}).$mount("#configure_rule")},"5b5c":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"de_DE":{"step1_header":"Schritt 1: Anmeldezeitraum festlegen","date":"Datum","time":"Uhrzeit","begin":"Anfang des Anmeldezeitraums","end":"Ende des Anmeldezeitraums"},"en_GB":{"step1_header":"Step 1: Define registration period","date":"Date","time":"Time","begin":"Start of registration period","end":"End of registration period"}}'),delete e.options._Ctor}},"8f17":function(e,t,n){"use strict";var r=n("e375"),s=n.n(r);s.a},ab9c:function(e,t,n){"use strict";var r=n("2759"),s=n.n(r);s.a},b493:function(e,t,n){"use strict";var r=n("3836"),s=n.n(r);t["default"]=s.a},ba02:function(e,t,n){"use strict";var r=n("5b5c"),s=n.n(r);t["default"]=s.a},be7e:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"de_DE":{"step2_header":"Schritt 2: Kapazitäten der Veranstaltungen festlegen","course":"Veranstaltung","times_rooms":"Zeit/Veranstaltungsort","capacity":"max. Teilnehmendenanzahl","course_details":"Veranstaltungsdetails aufrufen"},"en_GB":{"step2_header":"Step 2: Set course capacities","course":"Course","times_rooms":"Time/Course location","capacity":"max. Number of Participants","course_details":"Display course details"}}'),delete e.options._Ctor}},e375:function(e,t,n){},e81e:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"de_DE":{"nextStep":"Weiter","prevStep":"Zurück"},"en_GB":{"nextStep":"Next","prevStep":"Back"}}'),delete e.options._Ctor}},fc8c:function(e,t,n){"use strict";var r=n("be7e"),s=n.n(r);t["default"]=s.a}});
//# sourceMappingURL=configure_rule.a41919bd.js.map